<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>praat.js</title>
  </head>
  <body>
    <div id="results"></div>
    <script type="text/javascript" src="praat.js"></script>
    <script type='text/javascript'>
      praat({arguments: ["--version"]})
      praat({noInitialRun: true}).then(async function(Module) {
        window.Module = Module
        var response = await fetch("process.praat")
        var content = await response.text()
        Module.FS.writeFile("process.praat", content)
        var response = await fetch("1.wav")
        var content = await response.arrayBuffer()
        content = new Uint8Array(content)
        Module.FS.writeFile("1.wav", content)
        Module.callMain(["--run", "process.praat", "1.wav", "results.csv"])
        var results = Module.FS.readFile("results.csv", {encoding: "utf8"})
        console.log(results)
        document.getElementById("results").innerText = results
      })
    </script>
  </body>
</html>
